<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–∞–≤–∏–ª–∞</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background: #f0f0f0; }
        form { margin: 0; display:inline; }
        button { cursor: pointer; }
    </style>
</head>
<body>
    <h2>üìú –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è {{ session["user"] }}</h2>

    <!-- üîä –û–±—â–∞—è –∫–Ω–æ–ø–∫–∞ —Ç–µ—Å—Ç–∞ –≤–∏–±—Ä–∞—Ü–∏–∏ -->
    <form method="POST" action="/test_vibration">
        <button type="submit" style="margin-bottom: 15px;">üîä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–±—Ä–∞—Ü–∏—é (default)</button>
    </form>

    <table>
        <tr>
            <th>–ú–∏–Ω</th>
            <th>–ú–∞–∫—Å</th>
            <th>–°–∏–ª–∞</th>
            <th>–í—Ä–µ–º—è</th>
            <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
            <th>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
        </tr>
        {% for rule in rules %}
        <tr>
            <td>{{ rule.min }}</td>
            <td>{{ rule.max }}</td>
            <td>{{ rule.strength }}</td>
            <td>{{ rule.duration }}</td>
            <td>{{ rule.action }}</td>
            <td>
                <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ -->
                <form method="POST" action="/test_rule/{{ loop.index0 }}">
                    <button type="submit">üîä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                </form>

                <!-- –£–¥–∞–ª–∏—Ç—å -->
                <form method="POST">
                    <button type="submit" name="delete_rule" value="{{ loop.index0 }}">‚ùå –£–¥–∞–ª–∏—Ç—å</button>
                </form>

                <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å -->
                <form method="POST">
                    <input type="hidden" name="edit_rule" value="{{ loop.index0 }}">
                    –ú–∏–Ω: <input type="number" name="min" value="{{ rule.min }}" required>
                    –ú–∞–∫—Å: <input type="number" name="max" value="{{ rule.max }}" required>
                    –°–∏–ª–∞: <input type="number" name="strength" value="{{ rule.strength }}">
                    –í—Ä–µ–º—è: <input type="number" name="duration" value="{{ rule.duration }}">
                    –î–µ–π—Å—Ç–≤–∏–µ: <input type="text" name="action" value="{{ rule.action }}">
                    <button type="submit">‚úèÔ∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ</h3>
    <form method="POST">
        –ú–∏–Ω: <input type="number" name="min" required>
        –ú–∞–∫—Å: <input type="number" name="max" required>
        –°–∏–ª–∞: <input type="number" name="strength">
        –í—Ä–µ–º—è: <input type="number" name="duration">
        –î–µ–π—Å—Ç–≤–∏–µ: <input type="text" name="action">
        <button type="submit" name="add_rule">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>

    <p><a href="/">‚¨Ö –ù–∞–∑–∞–¥</a></p>
</body>
</html>
